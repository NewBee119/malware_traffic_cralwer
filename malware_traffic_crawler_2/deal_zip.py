# coding=utf-8
import os
import zipfile
'''
main_function:将指定路径下的所有zip压缩包解包
'''
AllZipFilePath=['/Users/jihong/Downloads/pcap_new/2019','/Users/jihong/Downloads/pcap_new/2018',
                      '/Users/jihong/Downloads/pcap_new/2017','/Users/jihong/Downloads/pcap_new/2016',
                      '/Users/jihong/Downloads/pcap_new/2015','/Users/jihong/Downloads/pcap_new/2014',
                      '/Users/jihong/Downloads/pcap_new/2013']
for zip_files_path in AllZipFilePath:
    all_zipfile=os.listdir(zip_files_path)
    count=1
    for child_path in all_zipfile:
        try:
            currZipFile_path=os.path.join("%s/%s"%(zip_files_path,child_path))
            zipFile = zipfile.ZipFile(currZipFile_path)
            #zipFile.extractall(保存路径，压缩包里的指定文件，解包密码)第二个参数为namelist()代表解压指定压缩包中的所有文件，而不是某一文件
            zipFile.extractall(zip_files_path,zipFile.namelist(),'infected')
            print "extractall successful！ {0} : {1}".format(count, currZipFile_path)
            count+=1
        except:
            print "\t extractall error  ",currZipFile_path
